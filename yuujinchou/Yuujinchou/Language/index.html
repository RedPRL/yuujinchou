<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Language (yuujinchou.Yuujinchou.Language)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">yuujinchou</a> &#x00BB; <a href="../index.html">Yuujinchou</a> &#x00BB; Language</nav><header class="odoc-preamble"><h1>Module <code><span>Yuujinchou.Language</span></code></h1><p>The <a href="#"><code>Language</code></a> module defines the language of modifiers.</p></header><nav class="odoc-toc"><ul><li><a href="#types">Types</a></li><li><a href="#modifier-builders">Modifier Builders</a><ul><li><a href="#basics">Basics</a></li><li><a href="#negation">Negation</a></li><li><a href="#renaming">Renaming</a></li><li><a href="#sequencing">Sequencing</a></li><li><a href="#union">Union</a></li><li><a href="#custom-hooks">Custom Hooks</a></li><li><a href="#ugly-printing">Ugly Printing</a></li></ul></li></ul></nav><div class="odoc-content"><h2 id="types"><a href="#types" class="anchor"></a>Types</h2><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'hook t</span></span></code></div><div class="spec-doc"><p>The abstract type of modifiers, parametrized by the type of hook labels. See <a href="#val-hook"><code>hook</code></a> for hook labels. One can largely ignore hook labels unless <a href="#val-hook"><code>hook</code></a> is used.</p><p>The idea is to construct a modifier using builders in <a href="#"><code>Language</code></a> and then execute it using <a href="../Modifier/module-type-S/index.html#val-modify"><code>Modifier.S.modify</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><span>(<span><span class="type-var">'hook</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'hook</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'hook</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'hook</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Checking equality.</p></div></div><h2 id="modifier-builders"><a href="#modifier-builders" class="anchor"></a>Modifier Builders</h2><h3 id="basics"><a href="#basics" class="anchor"></a>Basics</h3><div class="odoc-spec"><div class="spec value anchored" id="val-all"><a href="#val-all" class="anchor"></a><code><span><span class="keyword">val</span> all : <span><span class="type-var">'hook</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>all</code> keeps the content of the current tree. The <a href="../Modifier/module-type-S/Perform/index.html#val-not_found"><code>Modifier.S.Perform.not_found</code></a> effect will be performed if the tree is empty (nothing to keep). To avoid the emptiness checking, use the identity modifier <a href="#val-id"><code>id</code></a>. This is equivalent to <a href="#val-only"><code>only</code></a><code> []</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-id"><a href="#val-id" class="anchor"></a><code><span><span class="keyword">val</span> id : <span><span class="type-var">'hook</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>id</code> is <a href="#val-seq"><code>seq</code></a><code> []</code>, which keeps the content of the current tree. This is different from <a href="#val-all"><code>all</code></a> because, unlike <a href="#val-all"><code>all</code></a>, <code>id</code> does not check whether the tree is empty.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 5.0.0</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-only"><a href="#val-only" class="anchor"></a><code><span><span class="keyword">val</span> only : <span><a href="../Trie/index.html#type-path">Trie.path</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'hook</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>only path</code> keeps the subtree rooted at <code>path</code>. Bindings outside the subtree are dropped. The <a href="../Modifier/module-type-S/Perform/index.html#val-not_found"><code>Modifier.S.Perform.not_found</code></a> effect will be performed if the subtree is empty (nothing to keep).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-in_"><a href="#val-in_" class="anchor"></a><code><span><span class="keyword">val</span> in_ : <span><a href="../Trie/index.html#type-path">Trie.path</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'hook</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'hook</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>in_ path m</code> runs the modifier <code>m</code> on the subtree rooted at <code>path</code>. Bindings outside the subtree are kept intact.</p><p>For example, suppose we have two bindings <code>x.a</code> and <code>y</code>. <code>in_ [&quot;x&quot;] </code><a href="#val-all"><code>all</code></a> will keep both <code>x.a</code> and <code>y</code>, while <a href="#val-only"><code>only</code></a><code> [&quot;x&quot;]</code> will keep <code>x.y</code> but drop <code>y</code>.</p></div></div><h3 id="negation"><a href="#negation" class="anchor"></a>Negation</h3><div class="odoc-spec"><div class="spec value anchored" id="val-none"><a href="#val-none" class="anchor"></a><code><span><span class="keyword">val</span> none : <span><span class="type-var">'hook</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>none</code> drops everything. The <a href="../Modifier/module-type-S/Perform/index.html#val-not_found"><code>Modifier.S.Perform.not_found</code></a> effect will be performed if the tree was already empty (nothing to drop). To avoid the emptiness checking, use the empty modifier <a href="#val-union"><code>union</code></a><code> []</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-except"><a href="#val-except" class="anchor"></a><code><span><span class="keyword">val</span> except : <span><a href="../Trie/index.html#type-path">Trie.path</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'hook</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>except p</code> drops the subtree rooted at <code>p</code>. The <a href="../Modifier/module-type-S/Perform/index.html#val-not_found"><code>Modifier.S.Perform.not_found</code></a> effect will be performed if the subtree was already empty (nothing to drop). This is equivalent to <a href="#val-in_"><code>in_</code></a><code> p </code><a href="#val-none"><code>none</code></a>.</p></div></div><h3 id="renaming"><a href="#renaming" class="anchor"></a>Renaming</h3><div class="odoc-spec"><div class="spec value anchored" id="val-renaming"><a href="#val-renaming" class="anchor"></a><code><span><span class="keyword">val</span> renaming : <span><a href="../Trie/index.html#type-path">Trie.path</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Trie/index.html#type-path">Trie.path</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'hook</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>renaming path path'</code> relocates the subtree rooted at <code>path</code> to <code>path'</code>. The existing bindings with the prefix <code>path'</code> (if any) will be dropped. The <a href="../Modifier/module-type-S/Perform/index.html#val-not_found"><code>Modifier.S.Perform.not_found</code></a> effect will be performed if the subtree was empty (nothing to move).</p></div></div><h3 id="sequencing"><a href="#sequencing" class="anchor"></a>Sequencing</h3><div class="odoc-spec"><div class="spec value anchored" id="val-seq"><a href="#val-seq" class="anchor"></a><code><span><span class="keyword">val</span> seq : <span><span><span><span class="type-var">'hook</span> <a href="#type-t">t</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'hook</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>seq [m0; m1; m2; ...; mn]</code> runs the modifiers <code>m0</code>, <code>m1</code>, <code>m2</code>, ..., <code>mn</code> in order. In particular, <code>seq []</code> is the identity modifier <a href="#val-id"><code>id</code></a>.</p></div></div><h3 id="union"><a href="#union" class="anchor"></a>Union</h3><div class="odoc-spec"><div class="spec value anchored" id="val-union"><a href="#val-union" class="anchor"></a><code><span><span class="keyword">val</span> union : <span><span><span><span class="type-var">'hook</span> <a href="#type-t">t</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'hook</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>union [m0; m1; m2; ...; mn]</code> calculates the union of the results of individual modifiers <code>m0</code>, <code>m1</code>, <code>m2</code>, ..., <code>mn</code>.</p><p>In particular, <code>union []</code> is the empty modifier; unlike <a href="#val-none"><code>none</code></a>, <code>union []</code> will not check whether the tree was already empty.</p><p>The <a href="../Modifier/module-type-S/Perform/index.html#val-shadow"><code>Modifier.S.Perform.shadow</code></a> effect will be performed to resolve name conflicts while calculating the union, assuming that the results from a later modifier are intended to shadow the results from an earlier modifier.</p></div></div><h3 id="custom-hooks"><a href="#custom-hooks" class="anchor"></a>Custom Hooks</h3><div class="odoc-spec"><div class="spec value anchored" id="val-hook"><a href="#val-hook" class="anchor"></a><code><span><span class="keyword">val</span> hook : <span><span class="type-var">'hook</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'hook</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>hook h</code> applies the hook labelled <code>h</code> to the entire tree by performing the <a href="../Modifier/module-type-S/Perform/index.html#val-hook"><code>Modifier.S.Perform.hook</code></a> effect.</p></div></div><h3 id="ugly-printing"><a href="#ugly-printing" class="anchor"></a>Ugly Printing</h3><div class="odoc-spec"><div class="spec value anchored" id="val-dump"><a href="#val-dump" class="anchor"></a><code><span><span class="keyword">val</span> dump : 
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'hook</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'hook</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>dump dump_hook m</code> dumps the internal representation of <code>m</code> for debugging, where <code>dump_hook</code> is the ugly printer for hook labels (see <a href="#val-hook"><code>hook</code></a>).</p></div></div></div></body></html>
